# Breeze-ASR-25 æœ€ä½³åŒ–ç‰ˆæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ¯ ç‰ˆæœ¬ç‰¹è‰²

### çµåˆå…©å€‹ç‰ˆæœ¬çš„å„ªå‹¢
- **train.py çš„è¨˜æ†¶é«”æ•ˆç‡**: å³æ™‚è½‰æ›ã€å¤šé€²ç¨‹è¼‰å…¥
- **finetune_Breeze_whisper.py çš„åŠŸèƒ½æ€§**: å®Œæ•´çš„ Breeze æ¨¡å‹æ”¯æ´
- **é‡å° RTX 3060 Ti 8GB å„ªåŒ–**: ç¢ºä¿ç©©å®šé‹è¡Œ

## ğŸ“‹ ç³»çµ±éœ€æ±‚

### ç¡¬é«”éœ€æ±‚
- **GPU**: NVIDIA RTX 3060 Ti (8GB VRAM) æˆ–æ›´é«˜
- **CPU**: AMD Ryzen 5 3600 æˆ–æ›´é«˜
- **è¨˜æ†¶é«”**: 32GB RAM (å»ºè­°)
- **ç¡¬ç¢Ÿ**: è‡³å°‘ 20GB å¯ç”¨ç©ºé–“

### è»Ÿé«”éœ€æ±‚
- **Python**: 3.8+
- **CUDA**: 11.0+
- **PyTorch**: 2.0+
- **Transformers**: 4.30+

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ç’°å¢ƒæº–å‚™
```bash
# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
.venv\Scripts\activate

# å®‰è£ä¾è³´ (å¦‚æœéœ€è¦)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
pip install transformers datasets librosa jiwer tensorboard
```

### 2. è³‡æ–™æº–å‚™
ç¢ºä¿æ‚¨æœ‰ä»¥ä¸‹æª”æ¡ˆï¼š
- `metadata_train.csv`: è¨“ç·´è³‡æ–™
- `metadata_test.csv`: æ¸¬è©¦è³‡æ–™

**å¿…è¦æ¬„ä½**:
- `file`: éŸ³è¨Šæª”æ¡ˆè·¯å¾‘
- `ä¸­æ–‡æ„è­¯`: å°æ‡‰çš„ä¸­æ–‡æ–‡å­—

### 3. é–‹å§‹è¨“ç·´
```bash
# å–®ç¨é‹è¡Œ
python finetune_Breeze_optimal.py

# åŒæ™‚ç›£æ§ (å»ºè­°)
# çµ‚ç«¯ 1: è¨“ç·´
python finetune_Breeze_optimal.py

# çµ‚ç«¯ 2: ç›£æ§
python monitor_training.py

# çµ‚ç«¯ 3: TensorBoard
tensorboard --logdir ./breeze-asr-25-optimal/runs
```

## âš™ï¸ é…ç½®èªªæ˜

### è¨˜æ†¶é«”å„ªåŒ–é…ç½®
```python
# æ¥µå°æ‰¹æ¬¡å¤§å°ç¢ºä¿ç©©å®š
per_device_train_batch_size=2
per_device_eval_batch_size=2

# å¤§æ¢¯åº¦ç´¯ç©ç¶­æŒè¨“ç·´æ•ˆæœ
gradient_accumulation_steps=8  # æœ‰æ•ˆæ‰¹æ¬¡ = 2*8 = 16

# FP16 ç¯€çœè¨˜æ†¶é«”
fp16=True

# é—œé–‰æ¢¯åº¦æª¢æŸ¥é»é¿å…ç›¸å®¹æ€§å•é¡Œ
gradient_checkpointing=False
```

### è¨“ç·´ç©©å®šæ€§é…ç½®
```python
# ä¿å®ˆçš„å­¸ç¿’ç‡
learning_rate=1e-5

# é™åˆ¶è¨“ç·´æ­¥æ•¸
max_steps=5000

# é »ç¹è©•ä¼°å’Œä¿å­˜
eval_steps=500
save_steps=500

# æ—©åœæ©Ÿåˆ¶
early_stopping_patience=3
```

### æ•ˆèƒ½å„ªåŒ–é…ç½®
```python
# å³æ™‚è³‡æ–™è½‰æ›
vectorized_datasets = dataset_split.with_transform(prepare_fn)

# å¤šé€²ç¨‹è¼‰å…¥
dataloader_num_workers=2

# ç”Ÿæˆæ¨¡å¼è©•ä¼°
predict_with_generate=True
generation_max_length=448
```

## ğŸ“Š é æœŸæ•ˆèƒ½

### è¨˜æ†¶é«”ä½¿ç”¨
- **GPU è¨˜æ†¶é«”**: 3-5GB (é ä½æ–¼ 8GB é™åˆ¶)
- **ç³»çµ±è¨˜æ†¶é«”**: 8-12GB
- **ç¡¬ç¢Ÿç©ºé–“**: æ¨¡å‹æª¢æŸ¥é»ç´„ 5GB

### è¨“ç·´æ™‚é–“
- **ç¸½è¨“ç·´æ™‚é–“**: 3-5 å°æ™‚ (5000 æ­¥)
- **æ¯æ­¥æ™‚é–“**: 2-3 ç§’
- **è©•ä¼°æ™‚é–“**: 5-10 åˆ†é˜ (æ¯ 500 æ­¥)

### é æœŸçµæœ
- **WER**: ç›®æ¨™ < 20% (å–æ±ºæ–¼è³‡æ–™å“è³ª)
- **CER**: ç›®æ¨™ < 15%
- **è¨“ç·´ç©©å®šæ€§**: é«˜ (ç„¡ OOM é¢¨éšª)

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡ŒåŠè§£æ±ºæ–¹æ¡ˆ

#### 1. CUDA è¨˜æ†¶é«”ä¸è¶³
```bash
# æª¢æŸ¥ GPU ç‹€æ…‹
nvidia-smi

# å¦‚æœä»ç„¶ OOMï¼Œé€²ä¸€æ­¥é™ä½æ‰¹æ¬¡å¤§å°
per_device_train_batch_size=1
gradient_accumulation_steps=16
```

#### 2. å¤šé€²ç¨‹éŒ¯èª¤
```python
# å¦‚æœ Windows å¤šé€²ç¨‹æœ‰å•é¡Œï¼Œè¨­ç‚º 0
dataloader_num_workers=0
```

#### 3. è³‡æ–™è¼‰å…¥éŒ¯èª¤
```python
# æª¢æŸ¥è³‡æ–™è·¯å¾‘å’Œæ ¼å¼
print(train_df.head())
print(train_df.columns)
```

#### 4. æ¨¡å‹è¼‰å…¥å¤±æ•—
```bash
# æª¢æŸ¥ç¶²è·¯é€£æ¥å’Œ HuggingFace å­˜å–
huggingface-cli login
```

## ğŸ“ˆ ç›£æ§å’Œè©•ä¼°

### TensorBoard ç›£æ§
```bash
# å•Ÿå‹• TensorBoard
tensorboard --logdir ./breeze-asr-25-optimal/runs

# ç€è¦½å™¨é–‹å•Ÿ
http://localhost:6006
```

### é—œéµæŒ‡æ¨™
- **è¨“ç·´æå¤±**: æ‡‰è©²æŒçºŒä¸‹é™
- **è©•ä¼° WER**: æ‡‰è©²æŒçºŒæ”¹å–„
- **å­¸ç¿’ç‡**: æŒ‰èª¿åº¦å™¨è®ŠåŒ–
- **GPU è¨˜æ†¶é«”**: ç©©å®šåœ¨ 3-5GB

### æ—¥èªŒæª”æ¡ˆ
- **è¨“ç·´æ—¥èªŒ**: `./breeze-asr-25-optimal/logs/`
- **æª¢æŸ¥é»**: `./breeze-asr-25-optimal/checkpoint-*/`
- **æœ€çµ‚æ¨¡å‹**: `./breeze-asr-25-optimal/`

## ğŸ¯ æœ€ä½³å¯¦è¸

### 1. è¨“ç·´å‰æº–å‚™
- ç¢ºä¿è³‡æ–™å“è³ªè‰¯å¥½
- æª¢æŸ¥éŸ³è¨Šæª”æ¡ˆå®Œæ•´æ€§
- é©—è­‰æ–‡å­—æ¨™ç±¤æ­£ç¢ºæ€§

### 2. è¨“ç·´æœŸé–“
- å®šæœŸæª¢æŸ¥ TensorBoard
- ç›£æ§ GPU è¨˜æ†¶é«”ä½¿ç”¨
- è§€å¯Ÿ WER è®ŠåŒ–è¶¨å‹¢

### 3. è¨“ç·´å¾Œè™•ç†
- ä¿å­˜æœ€ä½³æ¨¡å‹
- é€²è¡Œé¡å¤–çš„æ¸¬è©¦è©•ä¼°
- è¨˜éŒ„è¨“ç·´åƒæ•¸å’Œçµæœ

## ğŸ”„ é€²éšèª¿æ•´

### æ ¹æ“šçµæœèª¿æ•´åƒæ•¸

#### å¦‚æœè¨“ç·´å¤ªæ…¢
```python
# å¢åŠ æ‰¹æ¬¡å¤§å° (å¦‚æœè¨˜æ†¶é«”å…è¨±)
per_device_train_batch_size=4
gradient_accumulation_steps=4

# å¢åŠ  workers
dataloader_num_workers=4
```

#### å¦‚æœ WER ä¸å¤ å¥½
```python
# å¢åŠ è¨“ç·´æ­¥æ•¸
max_steps=10000

# é™ä½å­¸ç¿’ç‡
learning_rate=5e-6

# å¢åŠ é ç†±æ­¥æ•¸
warmup_steps=1000
```

#### å¦‚æœéæ“¬åˆ
```python
# å¢åŠ æ¬Šé‡è¡°æ¸›
weight_decay=0.05

# å¢åŠ  dropout (éœ€è¦ä¿®æ”¹æ¨¡å‹é…ç½®)
# æˆ–ä½¿ç”¨è³‡æ–™å¢å¼·
```

é€™å€‹æœ€ä½³åŒ–ç‰ˆæœ¬çµåˆäº†å…©å€‹ç‰ˆæœ¬çš„å„ªå‹¢ï¼Œæ‡‰è©²èƒ½åœ¨æ‚¨çš„ç¡¬é«”ä¸Šç©©å®šé«˜æ•ˆåœ°é‹è¡Œï¼Œä¸¦ç²å¾—è‰¯å¥½çš„è¨“ç·´çµæœï¼ 